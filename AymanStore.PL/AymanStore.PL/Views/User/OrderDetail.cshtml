@model AymanStore.PL.Models.ShoppingCart_VM

@{
    ViewData["Title"] = "Order Details";
}
<style>

    .card {
        border-radius: 12px;
    }

    .card-header {
        font-size: 1rem;
        font-weight: 600;
    }

    .table th, .table td {
        vertical-align: middle;
    }
</style>

<div class="container">
    <div class="breadcrumb">
        <span>User > Order Details</span>
    </div>
</div>

<div class="container mt-4">
    <!-- Page Title -->
@*     <h2 class="mb-4 font-weight-bold">Order Details</h2>
 *@
    <!-- Order Summary -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light">
            <strong>Order Summary</strong>
        </div>
        <div class="card-body">
            <p><strong>Order ID:</strong> @Model.OrderTBL_VM.HashCode</p>
            <p><strong>Order Date:</strong> @(Model.OrderTBL_VM.DateOfSubmit?.ToString("dd/MM/yyyy"))</p>
            <p>
                <strong>Status:</strong>
                <span class="badge bg-warning text-dark">@Model.OrderTBL_VM.ShippingStatusTBL.Name</span>
            </p>
            <p><strong>Total Amount:</strong> $@Model.OrderTBL_VM.TotalAmount</p>
        </div>
    </div>

    <!-- Shipping Address -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light">
            <strong>Shipping Address</strong>
        </div>
        <div class="card-body">
            <p>Name: @Model.OrderTBL_VM.OrderByUserTBL.FirstName, @Model.OrderTBL_VM.OrderByUserTBL.LastName</p>
            <p>Email: @Model.OrderTBL_VM.OrderByUserTBL.Email</p>
            <p>Country: @Model.OrderTBL_VM.CountryTBL.Name</p>
            <p>Phones: @Model.OrderTBL_VM.Phones</p>
            <p>Address: @Model.OrderTBL_VM.Address</p>
        </div>
    </div>

    <!-- Items in Order -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light">
            <strong>Items in this Order</strong>
        </div>
        <div class="card-body">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Product</th>
                        <th>Barcode</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Shipping</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.OrderDetailTBL_VM)
                    {
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <a asp-controller="Home" asp-action="ProductDetail" asp-route-ProductId="@item.ProductTBLId">
                                        <img src="@item.ProductTBL.Image" alt="@item.ProductTBL.Name" class="img-thumbnail me-3" style="width:80px;height:80px;object-fit:cover;" />
                                    </a>
                                    <div>
                                        <div class="fw-bold">@item.ProductTBL.Name</div>
                                        <div class="text-muted small">@item.ProductTBL.Brand</div>
                                    </div>
                                </div>
                            </td>
                            <td>@item.ProductTBL.Barcode</td>
                            <td>@item.Quantity</td>
                            <td>$@item.Price</td>
                            <td>$@(item.Quantity * item.ShippingCost)</td>
                            <td>$@(item.Quantity * item.Price + item.Quantity * item.ShippingCost)</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <!-- Back Button -->
    <a asp-controller="User" asp-action="Orders" asp-route-orderId="@Model.OrderTBL_VM.ID" class="btn btn-dark rounded-pill px-4">Back to Orders</a>
</div>